# ğŸ“Š TÃ³m Táº¯t Khá»Ÿi Táº¡o Dá»¯ Liá»‡u Máº«u

## ğŸ¯ Tá»•ng Quan
File `DataInitializer.java` Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t hoÃ n toÃ n Ä‘á»ƒ táº¡o Ä‘áº§y Ä‘á»§ cÆ¡ sá»Ÿ dá»¯ liá»‡u máº«u cho há»‡ thá»‘ng UTea Drink Website vá»›i dá»¯ liá»‡u Ä‘a dáº¡ng vÃ  phÃ¢n loáº¡i rÃµ rÃ ng.

---

## ğŸ“‚ Danh Má»¥c Sáº£n Pháº©m (5 Danh Má»¥c)

### 1. **TrÃ  Sá»¯a** - 11 sáº£n pháº©m
- TrÃ  sá»¯a truyá»n thá»‘ng
- TrÃ  matcha sá»¯a
- TrÃ  sá»¯a khoai mÃ´n
- TrÃ  sá»¯a Olong mochi
- Chocolate latte
- TrÃ  sá»¯a dÃ¢u
- TrÃ  sá»¯a trÃ¢n chÃ¢u hoÃ ng kim
- TrÃ  sá»¯a okinawa kim cÆ°Æ¡ng Ä‘en
- Matcha latte
- TrÃ  sá»¯a báº¡c hÃ 

### 2. **CÃ  PhÃª** - 5 sáº£n pháº©m
- CÃ  phÃª sá»¯a Ä‘Ã¡
- CÃ  phÃª Ä‘en Ä‘Ã¡
- Báº¡c xá»‰u
- CÃ  phÃª trá»©ng
- Cappuccino

### 3. **BÃ¡nh** - 11 sáº£n pháº©m
- BÃ¡nh cáº§u vá»“ng
- BÃ¡nh sandwich trá»©ng cháº£y
- BÃ¡nh sá»«ng bÃ²
- BÃ¡nh mochi nÆ°á»›ng
- BÃ¡nh donut
- BÃ¡nh sá»«ng bÃ² socola
- BÃ¡nh kem oreo
- BÃ¡nh pudding Caramel
- BÃ¡nh su kem
- BÃ¡nh tiramisu
- BÃ¡nh bÃ´ng lan trá»©ng muá»‘i

### 4. **Sinh Tá»‘** - 5 sáº£n pháº©m
- Sinh tá»‘ bÆ¡
- Sinh tá»‘ dÃ¢u
- Sinh tá»‘ xoÃ i
- Sinh tá»‘ dÆ°a háº¥u
- Sinh tá»‘ sapoche

### 5. **TrÃ  TrÃ¡i CÃ¢y** - 10 sáº£n pháº©m
- TrÃ  chanh nhiá»‡t Ä‘á»›i
- TrÃ  cherry nhiá»‡t Ä‘á»›i
- TrÃ  táº¯c
- Há»“ng trÃ  UTea
- TrÃ  Ä‘Ã o cam sáº£
- TrÃ  xanh
- TrÃ  Ã´ long
- TrÃ  váº£i
- TrÃ  dÃ¢u táº±m
- TrÃ  nhiá»‡t Ä‘á»›i

**ğŸ‰ Tá»•ng cá»™ng: 42 sáº£n pháº©m**

---

## ğŸ›’ Dá»¯ Liá»‡u Orders

### PhÃ¢n Loáº¡i Orders Theo Tráº¡ng ThÃ¡i:
- **NEW**: 2 Ä‘Æ¡n (má»›i táº¡o, chÆ°a xÃ¡c nháº­n)
- **PREPARING**: 3 Ä‘Æ¡n (Ä‘Ã£ xÃ¡c nháº­n, chá» shipper)
- **DELIVERING**: 1 Ä‘Æ¡n (Ä‘ang giao)
- **DELIVERED**: 15 Ä‘Æ¡n (Ä‘Ã£ giao thÃ nh cÃ´ng)

**ğŸ“¦ Tá»•ng cá»™ng: 21 orders**

### Äáº·c Äiá»ƒm:
- Má»—i order cÃ³ sá»‘ lÆ°á»£ng sáº£n pháº©m khÃ¡c nhau (1-3 items)
- GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng Ä‘a dáº¡ng dá»±a trÃªn base price cá»§a sáº£n pháº©m
- Thá»i gian táº¡o Ä‘Æ¡n phÃ¢n bá»• tá»« 30 phÃºt Ä‘áº¿n 15 ngÃ y trÆ°á»›c

---

## â­ Dá»¯ Liá»‡u Reviews

### Äáº·c Äiá»ƒm:
- **Sá»‘ lÆ°á»£ng reviews**: Khoáº£ng 30-35 reviews cho 15 sáº£n pháº©m Ä‘áº§u tiÃªn
- **Rating Ä‘a dáº¡ng**: Tá»« 3â­ Ä‘áº¿n 5â­
- **3 khÃ¡ch hÃ ng**: customer@utea.local, customer2@utea.local, thanhnau25@gmail.com
- **Tráº¡ng thÃ¡i**: Táº¥t cáº£ Ä‘Ã£ APPROVED

### PhÃ¢n Bá»• Reviews:
- Customer 1: Review cho táº¥t cáº£ 15 sáº£n pháº©m
- Customer 2: Review cho ~8 sáº£n pháº©m (má»—i 2 sáº£n pháº©m)
- Customer 3: Review cho ~5 sáº£n pháº©m (má»—i 3 sáº£n pháº©m)

### Ná»™i Dung Reviews:
- 5â­: "Sáº£n pháº©m tuyá»‡t vá»i! Ráº¥t hÃ i lÃ²ng, sáº½ mua láº¡i nhiá»u láº§n ná»¯a!"
- 4â­: "Sáº£n pháº©m tá»‘t, cháº¥t lÆ°á»£ng á»•n, giao hÃ ng nhanh"
- 3â­: "Sáº£n pháº©m bÃ¬nh thÆ°á»ng, cÃ³ thá»ƒ cáº£i thiá»‡n thÃªm"

---

## ğŸ“Š Shop Sections (5 Sections)

### 1. Sáº£n Pháº©m Ná»•i Báº­t (FEATURED)
- Hiá»ƒn thá»‹ 8 sáº£n pháº©m ná»•i báº­t
- Sort order: 0

### 2. BÃ¡n Cháº¡y Nháº¥t (TOP_SELLING)
- Sáº¯p xáº¿p theo `sold_count` giáº£m dáº§n
- Hiá»ƒn thá»‹ 8 sáº£n pháº©m
- Sort order: 1

### 3. Sáº£n Pháº©m Má»›i (NEW_ARRIVALS)
- Sáº¯p xáº¿p theo `created_at` giáº£m dáº§n
- Hiá»ƒn thá»‹ 8 sáº£n pháº©m
- Sort order: 2

### 4. ÄÃ¡nh GiÃ¡ Cao (TOP_RATED)
- Sáº¯p xáº¿p theo `rating_avg` giáº£m dáº§n
- Hiá»ƒn thá»‹ 8 sáº£n pháº©m
- Sort order: 3

### 5. Khuyáº¿n MÃ£i HÃ´m Nay (PROMOTION)
- Hiá»ƒn thá»‹ sáº£n pháº©m Ä‘ang cÃ³ khuyáº¿n mÃ£i
- Hiá»ƒn thá»‹ 8 sáº£n pháº©m
- Sort order: 4

---

## ğŸšš Shipping & Assignments

### Shipping Providers (3):
1. Giao hÃ ng nhanh - 15,000Ä‘
2. Giao hÃ ng tiáº¿t kiá»‡m - 12,000Ä‘
3. J&T Express - 18,000Ä‘

### Shippers (5):
1. shipper@utea.local - Pháº¡m VÄƒn ThÃ nh (bike)
2. shipper2@utea.local - LÃª HoÃ ng Nam (bike)
3. shipper3@utea.local - Tráº§n Minh Tuáº¥n (car)
4. shipper4@utea.local - Nguyá»…n Thá»‹ Hoa (bike)
5. shipper5@utea.local - VÃµ Äá»©c Anh (bike)

### Ship Assignments:
- Tá»± Ä‘á»™ng gÃ¡n shipper cho táº¥t cáº£ Ä‘Æ¡n DELIVERING vÃ  DELIVERED
- PhÃ¢n bá»• Ä‘á»u giá»¯a cÃ¡c shipper

---

## ğŸ Promotions & Vouchers

### Promotions (2):
1. **Khuyáº¿n mÃ£i toÃ n há»‡ thá»‘ng** (GLOBAL)
   - Giáº£m 15%
   - Ãp dá»¥ng cho táº¥t cáº£ sáº£n pháº©m

2. **Khuyáº¿n mÃ£i Shop** (SHOP)
   - Giáº£m 10%
   - Ãp dá»¥ng cho shop UTea Coffee & Tea

### Vouchers (2):
1. **GLOBAL50**
   - Giáº£m 50%
   - ÄÆ¡n tá»‘i thiá»ƒu: 200,000Ä‘
   - Pháº¡m vi: ToÃ n há»‡ thá»‘ng

2. **SHOP30**
   - Giáº£m 30%
   - ÄÆ¡n tá»‘i thiá»ƒu: 150,000Ä‘
   - Pháº¡m vi: Shop cá»¥ thá»ƒ

### Coupons (3):
1. **WELCOME10** - Giáº£m 10% cho Ä‘Æ¡n Ä‘áº§u tiÃªn
2. **SUMMER20** - Giáº£m 20k cho Ä‘Æ¡n tá»« 100k
3. **FREESHIP** - Miá»…n phÃ­ váº­n chuyá»ƒn

---

## ğŸ”„ TÃ­nh NÄƒng Tá»± Äá»™ng Äá»“ng Bá»™

### ProductSyncService
Sau khi khá»Ÿi táº¡o dá»¯ liá»‡u, há»‡ thá»‘ng tá»± Ä‘á»™ng:

1. **TÃ­nh `sold_count`**:
   - Äáº¿m tá»•ng sá»‘ lÆ°á»£ng sáº£n pháº©m Ä‘Ã£ bÃ¡n tá»« cÃ¡c orders DELIVERED
   - Cáº­p nháº­t vÃ o báº£ng `products`

2. **TÃ­nh `rating_avg`**:
   - TÃ­nh trung bÃ¬nh rating tá»« táº¥t cáº£ reviews APPROVED
   - LÃ m trÃ²n Ä‘áº¿n 2 chá»¯ sá»‘ tháº­p phÃ¢n
   - Cáº­p nháº­t vÃ o báº£ng `products`

### Káº¿t Quáº£:
- âœ… KhÃ´ng cÃ²n giÃ¡ trá»‹ máº·c Ä‘á»‹nh (rating_avg = 5, sold_count = 0)
- âœ… Má»—i sáº£n pháº©m cÃ³ giÃ¡ trá»‹ thá»±c táº¿ dá»±a trÃªn orders vÃ  reviews
- âœ… Dá»¯ liá»‡u Ä‘a dáº¡ng vÃ  chÃ­nh xÃ¡c

---

## ğŸ¨ Variants & Images

### Product Variants:
Má»—i sáº£n pháº©m cÃ³ **3 variants**:
- **Size S**: Base price, 350ml
- **Size M**: Base price + 5,000Ä‘, 500ml
- **Size L**: Base price + 10,000Ä‘, 700ml

### Product Images:
- Má»—i sáº£n pháº©m cÃ³ **1 áº£nh chÃ­nh** tá»« Cloudinary
- LÆ°u cáº£ `url` vÃ  `publicId` Ä‘á»ƒ quáº£n lÃ½
- Táº¥t cáº£ links hÃ¬nh áº£nh Ä‘á»u hoáº¡t Ä‘á»™ng

---

## ğŸ’¬ Conversations & Messages

### 2 Cuá»™c TrÃ² Chuyá»‡n Máº«u:
1. **Manager â†” Customer 1**:
   - 5 tin nháº¯n vá» khuyáº¿n mÃ£i vÃ  Ä‘áº·t hÃ ng

2. **Manager â†” Customer 2**:
   - 4 tin nháº¯n vá» sáº£n pháº©m vÃ  order

---

## ğŸ‘¥ Users & Roles

### Roles (5):
- ADMIN
- MANAGER
- SELLER
- CUSTOMER
- SHIPPER

### Users Máº«u:
1. **admin@utea.local** / 123456 - ADMIN
2. **manager@utea.local** / 123456 - MANAGER
3. **seller@utea.local** / 123456 - SELLER
4. **customer@utea.local** / 123456 - CUSTOMER
5. **customer2@utea.local** / 123456 - CUSTOMER
6. **thanhnau25@gmail.com** / 123456 - CUSTOMER
7. **shipper@utea.local** / 123456 - SHIPPER (x5)

---

## ğŸª Shop

**UTea Coffee & Tea**
- Äá»‹a chá»‰: 01 VÃµ VÄƒn NgÃ¢n, Thá»§ Äá»©c, TP.HCM
- Äiá»‡n thoáº¡i: 0901234567
- Tráº¡ng thÃ¡i: OPEN

### Shop Banners (3):
1. TrÃ  Sá»¯a Äáº·c Biá»‡t MÃ¹a HÃ¨
2. Combo Sinh Nháº­t Æ¯u ÄÃ£i 20%
3. CÃ  PhÃª SÃ¡ng - Thá»©c Dáº­y NÄƒng LÆ°á»£ng

---

## ğŸ° Toppings (7)

1. TrÃ¢n chÃ¢u Ä‘en - 5,000Ä‘
2. TrÃ¢n chÃ¢u tráº¯ng - 5,000Ä‘
3. Tháº¡ch dá»«a - 5,000Ä‘
4. Tháº¡ch rau cÃ¢u - 5,000Ä‘
5. Pudding - 8,000Ä‘
6. Trá»©ng cÃºt - 7,000Ä‘
7. Kem cheese - 10,000Ä‘

---

## ğŸ“ Addresses

### Customer Addresses:
- **customer@utea.local**: 123 ÄÆ°á»ng ABC, PhÆ°á»ng Linh Trung, Thá»§ Äá»©c
- **customer2@utea.local**: 456 ÄÆ°á»ng XYZ, PhÆ°á»ng Linh Chiá»ƒu, Thá»§ Äá»©c

---

## ğŸš€ CÃ¡ch Sá»­ Dá»¥ng

### Khá»Ÿi Äá»™ng Láº¡i á»¨ng Dá»¥ng:
```bash
# XÃ³a database cÅ© (náº¿u cáº§n reset)
DROP DATABASE UTEDrink2;
CREATE DATABASE UTEDrink2;

# Cháº¡y á»©ng dá»¥ng
mvn spring-boot:run
```

### Dá»¯ Liá»‡u Sáº½ Tá»± Äá»™ng:
1. âœ… Táº¡o táº¥t cáº£ tables (JPA auto-create)
2. âœ… Insert dá»¯ liá»‡u máº«u (DataInitializer)
3. âœ… TÃ­nh toÃ¡n `rating_avg` vÃ  `sold_count` (ProductSyncService)

### Kiá»ƒm Tra Káº¿t Quáº£:
```sql
-- Xem sáº£n pháº©m vá»›i rating vÃ  sold_count
SELECT 
    p.id, 
    p.name, 
    p.sold_count, 
    p.rating_avg,
    c.name as category
FROM products p
LEFT JOIN product_categories c ON p.category_id = c.id
ORDER BY p.sold_count DESC;

-- Xem reviews
SELECT 
    r.rating,
    r.content,
    p.name as product_name,
    u.full_name as customer_name
FROM reviews r
LEFT JOIN products p ON r.product_id = p.id
LEFT JOIN users u ON r.user_id = u.id
WHERE r.status = 'APPROVED';

-- Xem orders
SELECT 
    o.order_code,
    o.status,
    o.total,
    u.full_name as customer_name,
    p.name as product_name
FROM orders o
LEFT JOIN users u ON o.user_id = u.id
LEFT JOIN order_items oi ON oi.order_id = o.id
LEFT JOIN products p ON oi.product_id = p.id
ORDER BY o.created_at DESC;
```

---

## âš¡ Cáº£i Tiáº¿n So Vá»›i TrÆ°á»›c

### âŒ TrÆ°á»›c:
- Danh má»¥c "NÆ°á»›c Ã©p" khÃ´ng phÃ¹ há»£p
- Sáº£n pháº©m BÃ¡nh náº±m trong danh má»¥c CÃ  phÃª
- `rating_avg` vÃ  `sold_count` cÃ³ giÃ¡ trá»‹ máº·c Ä‘á»‹nh (4.5 vÃ  0)
- Thiáº¿u sections cho trang chá»§
- Ãt reviews vÃ  orders

### âœ… Sau:
- 5 danh má»¥c rÃµ rÃ ng: TrÃ  sá»¯a, CÃ  phÃª, BÃ¡nh, Sinh tá»‘, TrÃ  trÃ¡i cÃ¢y
- 42 sáº£n pháº©m phÃ¢n loáº¡i Ä‘Ãºng danh má»¥c
- `rating_avg` vÃ  `sold_count` Ä‘Æ°á»£c tÃ­nh tá»± Ä‘á»™ng tá»« dá»¯ liá»‡u thá»±c
- 5 sections Ä‘áº§y Ä‘á»§ cho trang chá»§
- 21 orders vÃ  30+ reviews vá»›i dá»¯ liá»‡u Ä‘a dáº¡ng
- Tá»± Ä‘á»™ng sync stats sau khi khá»Ÿi táº¡o

---

## ğŸ“ Ghi ChÃº

1. **Idempotent**: DataInitializer cÃ³ cÆ¡ cháº¿ kiá»ƒm tra Ä‘á»ƒ khÃ´ng táº¡o duplicate data
2. **Cloudinary**: Táº¥t cáº£ hÃ¬nh áº£nh Ä‘á»u lÆ°u trÃªn Cloudinary vá»›i public_id
3. **UTF-8**: Táº¥t cáº£ dá»¯ liá»‡u tiáº¿ng Viá»‡t Ä‘á»u hiá»ƒn thá»‹ chÃ­nh xÃ¡c
4. **Sync Service**: ProductSyncService cÃ³ thá»ƒ gá»i thá»§ cÃ´ng qua endpoint `/api/admin/sync/product-stats`

---

## ğŸ¯ Káº¿t Luáº­n

DataInitializer.java hiá»‡n Ä‘Ã£ hoÃ n thiá»‡n vá»›i:
- âœ… 42 sáº£n pháº©m Ä‘a dáº¡ng
- âœ… 5 danh má»¥c rÃµ rÃ ng
- âœ… 21 orders vá»›i nhiá»u tráº¡ng thÃ¡i
- âœ… 30+ reviews Ä‘a dáº¡ng
- âœ… 5 sections cho trang chá»§
- âœ… Tá»± Ä‘á»™ng tÃ­nh toÃ¡n rating_avg vÃ  sold_count
- âœ… Dá»¯ liá»‡u máº«u Ä‘áº§y Ä‘á»§ cho demo vÃ  testing

**ğŸ‰ Há»‡ thá»‘ng UTea Drink Website Ä‘Ã£ sáºµn sÃ ng vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u máº«u hoÃ n chá»‰nh!**

