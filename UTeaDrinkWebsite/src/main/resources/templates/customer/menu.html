<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Menu | UTeaDrink</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/customer.css}" />

    <style>
        :root{
            --accent:#e53935;
            --text:#111;
            --card:#e9e9ea;
            --ring:#e5e7eb;
            --header-h:80px;
            --tab-h:56px;
        }

        body.menu-page{ background:#fff; color:var(--text); padding-top:var(--header-h); }

        .menu-hero{ max-width:1400px; margin:8px auto 0; padding:0 12px; }
        .menu-hero .hero-img{ width:100%; height:320px; object-fit:cover; border-radius:12px; }

        .menu-tabs-wrap{ position:sticky; top:var(--header-h); z-index:1020; background:#fff; border-bottom:1px solid #eee; }
        .menu-tabs{ height:var(--tab-h); display:flex; align-items:center; justify-content:center; gap:32px; max-width:980px; margin:0 auto; }
        .menu-tab,
        .menu-tab:link,
        .menu-tab:visited,
        .menu-tab:hover,
        .menu-tab:active{
            background:transparent!important;
            color:#6b7280!important;
            font-weight:700;
            text-decoration:none!important;
            padding:10px 14px;
            border-bottom:3px solid transparent;
            transition:color .2s, border-color .2s, transform .2s;
        }
        .menu-tab:hover{ color:#111!important; border-bottom-color:#111; }
        .menu-tabs .menu-tab.active{ color:#111!important; border-bottom-color:#111!important; box-shadow:none!important; }
        a.menu-tab:focus{ outline:none; box-shadow:none; }

        section.menu-section{ scroll-margin-top:calc(var(--header-h) + var(--tab-h) + 18px); padding-top:8px; }
        section.menu-section + section.menu-section{ margin-top:34px; padding-top:24px; border-top:1px solid #eee; }
        .section-title{ font-size:1.45rem; font-weight:800; margin:0 0 18px; }

        .product-grid{
            display:grid; gap:22px; grid-template-columns:1fr;
        }
        @media (min-width:768px){ .product-grid{grid-template-columns:repeat(2,1fr);} }
        @media (min-width:992px){ .product-grid{grid-template-columns:repeat(3,1fr);} }

        .product-card{
            --media:220px;
            background:var(--card);
            border:1px solid var(--ring);
            border-radius:14px;
            padding:16px 18px;
            display:grid;
            grid-template-columns: 1.35fr var(--media);
            align-items:center;
            gap:16px;
            width:100%;
            height:auto;
            transition:transform .2s, box-shadow .2s, border-color .2s;
            cursor:pointer;
        }
        .product-card:hover{
            transform:translateY(-4px);
            box-shadow:0 10px 20px rgba(0,0,0,.08);
            border-color:#dcdfe3;
        }

        .product-name{ font-weight:800; font-size:1.0rem; line-height:1.25; margin:0 0 4px; }
        .product-price{ color:var(--accent); font-weight:800; font-size:1.1rem; margin:0 0 6px; }
        .product-desc{
            color:#222; font-size:.88rem; line-height:1.35; margin:0; max-width:48ch;
            display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;
        }

        .product-thumb{
            width:var(--media);
            height:var(--media);
            object-fit:contain;
            background:var(--card);
            border-radius:14px;
            justify-self:end;
            margin-right:-6px;
            padding:0;
        }

        @media (max-width:640px){
            .product-card{ grid-template-columns:1fr; gap:14px; }
            .product-thumb{ width:200px; height:200px; justify-self:center; margin-right:0; }
        }

        .container-narrow{ max-width:1200px; margin:0 auto; padding:0 12px; }
    </style>
</head>

<body class="menu-page">

<div th:replace="~{fragments/header :: header}"></div>

<div class="menu-hero">
    <img class="hero-img"
         src="https://res.cloudinary.com/dhmh2ekqy/image/upload/v1760047294/tra-sua-da-lat-topbanner_sdeac5.jpg"
         alt="UTeaDrink Banner" />
</div>

<div class="menu-tabs-wrap">
    <nav class="menu-tabs" id="menuTabs">
        <a href="#best" class="menu-tab active">Best seller</a>
        <a href="#milk-tea" class="menu-tab">Trà sữa</a>
        <a href="#juice" class="menu-tab">Nước ép</a>
        <a href="#cake" class="menu-tab">Bánh</a>
    </nav>
</div>

<div class="container-narrow">
    <!-- Best seller -->
    <section id="best" class="menu-section">
        <h2 class="section-title">Best seller</h2>
        <div class="product-grid" th:if="${bestSellers != null and !#lists.isEmpty(bestSellers)}">
            <article class="product-card"
                     th:each="p : ${bestSellers}"
                     th:onclick="|location.href='@{/product/{id}(id=${p.productId})}'|">
                <div>
                    <div class="product-name" th:text="${p.name}">Tên SP</div>
                    <div class="product-price" th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + ' đ'">0 đ</div>
                    <div class="product-desc" th:text="${p.description}">Mô tả…</div>
                </div>
                <img class="product-thumb" th:src="${p.imageUrl}" th:alt="${p.name}">
            </article>
        </div>
    </section>

    <!-- Trà sữa -->
    <section id="milk-tea" class="menu-section">
        <h2 class="section-title">Trà sữa</h2>
        <div class="product-grid" th:if="${milkTea != null and !#lists.isEmpty(milkTea)}">
            <article class="product-card"
                     th:each="p : ${milkTea}"
                     th:onclick="|location.href='@{/product/{id}(id=${p.productId})}'|">
                <div>
                    <div class="product-name" th:text="${p.name}">Tên SP</div>
                    <div class="product-price" th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + ' đ'">0 đ</div>
                    <div class="product-desc" th:text="${p.description}">Mô tả…</div>
                </div>
                <img class="product-thumb" th:src="${p.imageUrl}" th:alt="${p.name}">
            </article>
        </div>
    </section>

    <!-- Nước ép -->
    <section id="juice" class="menu-section">
        <h2 class="section-title">Nước ép</h2>
        <div class="product-grid" th:if="${juice != null and !#lists.isEmpty(juice)}">
            <article class="product-card"
                     th:each="p : ${juice}"
                     th:onclick="|location.href='@{/product/{id}(id=${p.productId})}'|">
                <div>
                    <div class="product-name" th:text="${p.name}">Tên SP</div>
                    <div class="product-price" th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + ' đ'">0 đ</div>
                    <div class="product-desc" th:text="${p.description}">Mô tả…</div>
                </div>
                <img class="product-thumb" th:src="${p.imageUrl}" th:alt="${p.name}">
            </article>
        </div>
    </section>

    <!-- Bánh -->
    <section id="cake" class="menu-section">
        <h2 class="section-title">Bánh</h2>
        <div class="product-grid" th:if="${cake != null and !#lists.isEmpty(cake)}">
            <article class="product-card"
                     th:each="p : ${cake}"
                     th:onclick="|location.href='@{/product/{id}(id=${p.productId})}'|">
                <div>
                    <div class="product-name" th:text="${p.name}">Tên SP</div>
                    <div class="product-price" th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + ' đ'">0 đ</div>
                    <div class="product-desc" th:text="${p.description}">Mô tả…</div>
                </div>
                <img class="product-thumb" th:src="${p.imageUrl}" th:alt="${p.name}">
            </article>
        </div>
    </section>
</div>

<div style="height:72px"></div>

<div th:replace="~{fragments/footer-home :: siteFooter}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
<script>
    (function(){
        const header=document.querySelector('.navbar')||document.querySelector('header');
        function upd(){
            if(header){
                const h=header.getBoundingClientRect().height||80;
                document.documentElement.style.setProperty('--header-h',h+'px');
            }
        }
        upd(); window.addEventListener('resize',upd);
    })();

    document.querySelectorAll('.menu-tab').forEach(a=>{
        a.addEventListener('click',e=>{
            const id=a.getAttribute('href');
            if(id&&id.startsWith('#')){
                e.preventDefault();
                const el=document.querySelector(id);
                if(el){ el.scrollIntoView({behavior:'smooth',block:'start'}); }
            }
        });
    });

    const tabs=[...document.querySelectorAll('.menu-tab')];
    const map={'best':0,'milk-tea':1,'juice':2,'cake':3};
    const io=new IntersectionObserver((entries)=>{
        entries.forEach(en=>{
            if(en.isIntersecting){
                tabs.forEach(t=>t.classList.remove('active'));
                const idx=map[en.target.id];
                if(idx!=null) tabs[idx].classList.add('active');
            }
        });
    },{rootMargin:'-40% 0px -55% 0px',threshold:0.01});
    document.querySelectorAll('section.menu-section').forEach(s=>io.observe(s));
</script>
</body>
</html>
