<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
	rel="stylesheet">
<style>
:root{
  --header-h:64px;            /* chiều cao header dùng đồng bộ */
}

.brand {
	font-weight: 900;
	letter-spacing: -.3px;
	color: var(--header-text) !important
}

.brand .dot {
	color: var(--brand)
}

.avatar {
	width: 34px;
	height: 34px;
	border-radius: 50%;
	display: grid;
	place-items: center;
	background: linear-gradient(90deg, var(--brand), #ffa455);
	color: #111;
	font-weight: 800;
	box-shadow: 0 0 0 2px rgba(0, 0, 0, .2)
}

.dropdown-menu {
	background: var(--bg-body);
	border: 1px solid var(--border)
}

.dropdown-item:hover {
	background: rgba(255, 123, 0, .15)
}

</style>
</head>
<body>
	<div th:fragment="header">
		<header class="main-header">
			<nav class="navbar navbar-expand-lg">
				<div class="container-fluid">
					<!-- Brand -->
					<a class="navbar-brand brand" th:href="@{/}"><strong> UTeaDrink </strong><span
						class="dot">🍹</span>
					</a>

					<!-- Right controls -->
					<div class="d-flex align-items-center gap-2">
						<button class="icon-btn" id="themeToggle" title="Đổi theme">
							<i class="bi bi-moon"></i>
						</button>
						<a href="#" class="icon-btn" title="Thông báo"><i
							class="bi bi-bell"></i></a>

						<div class="dropdown" sec:authorize="isAuthenticated()">
							<a class="d-flex align-items-center gap-2 nav-link" href="#"
								data-bs-toggle="dropdown">
								<div class="avatar">
									<i class="bi bi-person"></i>
								</div> <span class="d-none d-sm-inline"
								style="color: var(--header-text)" sec:authentication="name"></span>
								<i class="bi bi-caret-down-fill small"
								style="color: var(--header-text)"></i>
							</a>
							<ul class="dropdown-menu dropdown-menu-end">
								<li><span class="dropdown-item-text small text-muted"
									sec:authentication="principal.authorities"></span></li>
								<li><hr class="dropdown-divider"></li>
								<li>
									<form th:action="@{/logout}" method="post">
										<button class="dropdown-item text-danger">
											<i class="bi bi-box-arrow-right"></i> Đăng xuất
										</button>
									</form>
								</li>
							</ul>
						</div>

						<div class="d-flex" sec:authorize="isAnonymous()">
							<a class="btn btn-sm btn-warning me-2" th:href="@{/login}">Đăng
								nhập</a> <a class="btn btn-sm btn-outline-warning"
								th:href="@{/register}">Đăng ký</a>
						</div>
					</div>
				</div>
			</nav>
		</header>
		<script>
    (function(){
      // Default dark theo yêu cầu nhóm cam–đen
      const html=document.documentElement, key='utea.theme', btn=document.getElementById('themeToggle');
      function setTheme(t){ html.setAttribute('data-bs-theme',t); btn.innerHTML=(t==='dark')?'<i class="bi bi-sun"></i>':'<i class="bi bi-moon"></i>'; localStorage.setItem(key,t); }
      setTheme(localStorage.getItem(key)||'dark');
      btn?.addEventListener('click',()=> setTheme((html.getAttribute('data-bs-theme')||'dark')==='dark'?'light':'dark'));
    })();
  </script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	</div>
</body>
</html>
